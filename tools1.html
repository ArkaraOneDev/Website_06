<!DOCTYPE html>
<html lang="id" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formats Finder | Arkastone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #E2E8F0; 
            height: 100vh; 
            overflow: hidden; 
            display: flex;
            flex-direction: column;
        }

        /* Font adaptif menggunakan clamp logic via media query */
        html { font-size: 14px; }
        @media (min-width: 768px) { html { font-size: 16px; } }
        
        .bubble-item {
            animation: slideIn 0.3s ease-out forwards;
            opacity: 0;
        }
        @keyframes slideIn {
            from { transform: translateY(5px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .animate-column {
            opacity: 0;
            animation: columnFadeIn 0.5s ease-out forwards;
        }
        @keyframes columnFadeIn {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }

        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }

        .finder-col-content::-webkit-scrollbar { width: 4px; }
        .finder-col-content::-webkit-scrollbar-track { background: transparent; }
        .finder-col-content::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        
        /* Gaya Seleksi */
        .selected-item .app-icon-container { 
            ring: 3px solid #3b82f6;
            ring-offset: 2px;
        }
        .selected-item .app-label {
            color: #2563eb;
            font-weight: 700;
        }

        /* Gaya Ikon Aplikasi (Kolom 1) */
        .app-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s ease;
            user-select: none;
        }
        .app-card:active { transform: scale(0.9); }
        
        .app-icon-container {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 6px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: all 0.2s;
            background: white;
            border: 1px solid #f1f5f9;
        }
        .app-card:hover .app-icon-container {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .app-label {
            font-size: 0.65rem;
            font-weight: 500;
            color: #475569;
            text-align: center;
            width: 100%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Gaya Entri Daftar untuk Konten Gabungan */
        .column-entry {
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            padding: 10px 14px;
            margin: 4px 8px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.85rem; /* Font adaptif */
            background: white;
            border: 1px solid #f1f5f9;
            white-space: nowrap; /* Mencegah teks menjadi 2 baris */
        }
        .column-entry:hover:not(.selected-item-list) { 
            border-color: #bfdbfe;
            background-color: #f8fafc;
        }
        .selected-item-list {
            background-color: #eff6ff !important; 
            color: #2563eb !important;
            border-color: #3b82f6 !important;
        }

        .col-header {
            padding: 12px 16px;
            font-size: 0.65rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: #64748b;
            background-color: #f1f5f9;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: 8px;
        }

        /* Mobile specific column visibility */
        @media (max-width: 767px) {
            .mobile-hidden { display: none !important; }
        }
    </style>
</head>
<body class="p-3 md:p-5">

    <!-- Area Konten Utama -->
    <div class="flex-1 flex flex-col md:flex-row gap-4 overflow-hidden">
        <!-- Sidebar: Grid Aplikasi (Kolom 1) -->
        <div id="container-col1" class="w-full h-full md:w-1/3 flex flex-col bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm animate-column delay-1">
            <div class="col-header">Applications</div>
            <div id="col1" class="finder-col-content overflow-y-auto p-6 grid grid-cols-4 gap-y-6 gap-x-2 flex-1 items-start content-start">
                <!-- Data dummy akan di-render di sini -->
            </div>
        </div>

        <!-- Konten Gabungan: Subfolder & File (Kolom 2) -->
        <div id="container-col2" class="flex-1 h-full flex flex-col bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm animate-column delay-2 mobile-hidden">
            <div class="col-header">
                <!-- Tombol Back ke Kolom 1 (Hanya Mobile) -->
                <button id="btnBackToApps" onclick="navigateMobile(1)" class="md:hidden p-1 -ml-1 hover:bg-black/5 rounded-full">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                
                <!-- Tombol Back ke Folder Sebelumnya (Logic Internal) -->
                <button id="btnBackContent" onclick="handleBack()" class="hidden p-1 -ml-1 hover:bg-black/5 rounded-full">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                
                <span id="contentHeaderTitle">Contents</span>
            </div>
            <div id="colMerged" class="finder-col-content overflow-y-auto py-3 flex-1 bg-gray-50/20">
                <div class="mt-20 text-center opacity-20 text-[10px] font-bold uppercase tracking-widest text-gray-400">Pilih aplikasi untuk melihat isi</div>
            </div>
        </div>
    </div>

    <script>
        // Data Dummy untuk Kolom 1
        const dummyApps = [
            { id: 'app1', name: 'Social', color: 'text-pink-500', icon: 'M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z' },
            { id: 'app2', name: 'Work', color: 'text-blue-500', icon: 'M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745V20a2 2 0 002 2h14a2 2 0 002-2v-6.745zM16 8V5a3 3 0 00-3-3h-2a3 3 0 00-3 3v3h8z' },
            { id: 'app3', name: 'Finance', color: 'text-emerald-500', icon: 'M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z' },
            { id: 'app4', name: 'Photos', color: 'text-orange-500', icon: 'M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z' },
            { id: 'app5', name: 'Settings', color: 'text-slate-500', icon: 'M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z' },
            { id: 'app6', name: 'Health', color: 'text-red-500', icon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z' },
            { id: 'app7', name: 'Music', color: 'text-indigo-500', icon: 'M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3' },
            { id: 'app8', name: 'Games', color: 'text-violet-500', icon: 'M21 5H3a2 2 0 00-2 2v10a2 2 0 002 2h18a2 2 0 002-2V7a2 2 0 00-2-2zm-12 8H7v2H5v-2H3v-2h2V9h2v2h2v2zm10-2a1 1 0 11-2 0 1 1 0 012 0zm0 4a1 1 0 11-2 0 1 1 0 012 0z' }
        ];

        let activeNames = { 1: null, 2: null };
        let currentMobileCol = 1;

        window.onload = () => {
            renderApps();
            updateMobileVisibility();
            window.addEventListener('resize', updateMobileVisibility);
        };

        function updateMobileVisibility() {
            if (window.innerWidth >= 768) {
                document.getElementById('container-col1').classList.remove('mobile-hidden');
                document.getElementById('container-col2').classList.remove('mobile-hidden');
            } else {
                if (currentMobileCol === 1) {
                    document.getElementById('container-col1').classList.remove('mobile-hidden');
                    document.getElementById('container-col2').classList.add('mobile-hidden');
                } else {
                    document.getElementById('container-col1').classList.add('mobile-hidden');
                    document.getElementById('container-col2').classList.remove('mobile-hidden');
                }
            }
        }

        function navigateMobile(colNum) {
            currentMobileCol = colNum;
            updateMobileVisibility();
        }

        function renderApps() {
            const container = document.getElementById('col1');
            container.innerHTML = dummyApps.map((app, index) => `
                <div onclick="selectApp(this, '${app.id}', '${app.name}')" 
                     class="app-card bubble-item" style="animation-delay: ${index * 0.05}s">
                    <div class="app-icon-container">
                        <svg class="w-8 h-8 ${app.color}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${app.icon}"></path>
                        </svg>
                    </div>
                    <span class="app-label">${app.name}</span>
                </div>
            `).join('');
        }

        function selectApp(el, id, name) {
            document.querySelectorAll('.app-card').forEach(card => card.classList.remove('selected-item'));
            el.classList.add('selected-item');
            
            activeNames[1] = name;
            activeNames[2] = null;
            
            renderContents(name);
            updateHeaderTitle(name, false);
            
            if (window.innerWidth < 768) navigateMobile(2);
        }

        function renderContents(appName) {
            const container = document.getElementById('colMerged');
            const dummySubs = [
                { name: 'Assets', type: 'folder' },
                { name: 'Documentation', type: 'folder' },
                { name: 'Templates', type: 'folder' },
                { name: 'config_v1.json', type: 'file', ext: 'json', size: '1.2 KB' }
            ];

            container.innerHTML = dummySubs.map((item, index) => {
                const isFolder = item.type === 'folder';
                const iconColor = isFolder ? 'text-yellow-500' : 'text-blue-500';
                const iconPath = isFolder 
                        ? 'M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z'
                        : 'M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z';

                return `
                    <div onclick="selectContent(this, '${item.name}', '${item.type}')" 
                         class="column-entry bubble-item" style="animation-delay: ${index * 0.05}s">
                        <svg class="w-4 h-4 mr-3 ${iconColor} ${isFolder ? 'fill-current' : ''}" ${!isFolder ? 'fill="none" stroke="currentColor"' : ''} viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${iconPath}"></path>
                        </svg>
                        <span class="flex-1 truncate font-semibold text-gray-700">${item.name}</span>
                        ${item.size ? `<span class="text-[9px] text-gray-400 font-medium uppercase">${item.size}</span>` : ''}
                    </div>
                `;
            }).join('');
        }

        function selectContent(el, name, type) {
            if (type === 'folder') {
                activeNames[2] = name;
                updateHeaderTitle(name, true);
                const container = document.getElementById('colMerged');
                container.innerHTML = `<div class="p-8 text-center text-[10px] text-gray-400 font-bold uppercase tracking-widest italic">Folder Kosong</div>`;
            } else {
                activeNames[2] = name;
            }
            
            document.querySelectorAll('.column-entry').forEach(card => card.classList.remove('selected-item-list'));
            el.classList.add('selected-item-list');
        }

        function handleBack() {
            activeNames[2] = null;
            updateHeaderTitle(activeNames[1], false);
            renderContents(activeNames[1]);
        }

        function updateHeaderTitle(title, showBack) {
            document.getElementById('contentHeaderTitle').innerText = title;
            // Tombol back folder internal
            document.getElementById('btnBackContent').classList.toggle('hidden', !showBack);
            // Tombol back ke aplikasi (Hanya muncul di mobile jika tidak sedang di dalam subfolder)
            if (window.innerWidth < 768) {
                document.getElementById('btnBackToApps').classList.toggle('hidden', showBack);
            } else {
                document.getElementById('btnBackToApps').classList.add('hidden');
            }
        }
    </script>
</body>
</html>